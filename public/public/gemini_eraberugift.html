<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãˆã‚‰ã¹ã‚‹ã‚®ãƒ•ãƒˆä½œæˆãƒ‡ãƒ¢ï¼ˆä¿®æ­£ç‰ˆï¼‰</title>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* --- åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« --- */
        :root {
            --primary: #ff6b6b;
            --primary-light: #ff9f43;
            --bg-color: #fff9f9;
            --text-main: #2d3436;
            --text-sub: #636e72;
            --radius: 12px;
        }

        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.6;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 0 20px 40px;
            min-height: 100vh;
            background: #fff;
            box-shadow: 0 0 20px rgba(0,0,0,0.05);
        }

        /* --- UIãƒ‘ãƒ¼ãƒ„ --- */
        .btn {
            display: block;
            width: 100%;
            padding: 16px;
            border-radius: 50px;
            font-weight: bold;
            text-align: center;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            transition: 0.3s;
            margin-top: 20px;
            box-sizing: border-box;
            font-family: 'Zen Maru Gothic', sans-serif;
        }
        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }
        .btn-secondary {
            background: #f1f2f6;
            color: var(--text-sub);
        }
        .btn:hover { opacity: 0.9; transform: translateY(-2px); }
        .btn:active { transform: translateY(0); }

        h2 { font-size: 1.4rem; margin-bottom: 20px; text-align: center; }
        label { display: block; font-weight: bold; margin-bottom: 8px; font-size: 0.9rem; }
        
        input, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #eee;
            border-radius: var(--radius);
            font-size: 1rem;
            margin-bottom: 15px;
            box-sizing: border-box;
            font-family: inherit;
        }
        input:focus, textarea:focus { border-color: var(--primary); outline: none; }

        /* --- ã‚¹ãƒ†ãƒƒãƒ—è¡¨ç¤ºåˆ¶å¾¡ --- */
        .step-screen { display: none; animation: fadeIn 0.4s ease-out; }
        .step-screen.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- é€²æ—ãƒãƒ¼ --- */
        .progress-bar {
            display: flex;
            justify-content: center;
            padding: 20px 0;
            margin-bottom: 20px;
        }
        .dot { width: 8px; height: 8px; background: #eee; border-radius: 50%; margin: 0 5px; transition: 0.3s; }
        .dot.active { background: var(--primary); transform: scale(1.2); }

        /* --- å„ç”»é¢ã‚¹ã‚¿ã‚¤ãƒ« --- */
        .home-hero { text-align: center; padding-top: 60px; }
        .home-logo { font-size: 2rem; font-weight: 900; color: var(--primary); margin-bottom: 10px; }
        
        .input-group { background: #f9f9f9; padding: 15px; border-radius: var(--radius); margin-bottom: 15px; }
        .input-group h3 { font-size: 1rem; margin: 0 0 10px 0; color: var(--primary); }

        .loading-container { text-align: center; padding-top: 100px; }
        .spinner {
            width: 50px; height: 50px; border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary); border-radius: 50%;
            animation: spin 1s linear infinite; margin: 0 auto 20px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .item-card { display: flex; gap: 15px; margin-bottom: 15px; padding: 10px; border: 1px solid #eee; border-radius: var(--radius); align-items: center; background: white;}
        .item-thumb { width: 60px; height: 60px; background: #eee; border-radius: 8px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; color: #ccc; }
        .item-info { flex-grow: 1; overflow: hidden; }
        .item-title { font-weight: bold; font-size: 0.95rem; margin-bottom: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .item-link { font-size: 0.8rem; color: var(--text-sub); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; display: block; }

        .theme-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .theme-option {
            border: 2px solid #eee; border-radius: var(--radius); padding: 15px; text-align: center; cursor: pointer; transition: 0.2s;
        }
        .theme-option.selected { border-color: var(--primary); background-color: #fff0f0; }
        .theme-color { width: 100%; height: 40px; border-radius: 6px; margin-bottom: 8px; }

        .preview-mockup {
            border: 4px solid #333; border-radius: 20px; padding: 15px;
            background: #fff; min-height: 400px; position: relative; overflow: hidden;
        }
        .preview-header { text-align: center; padding: 20px 0; background: #fff0f5; margin: -15px -15px 15px; transition: background 0.3s; }
        .preview-msg { background: #fff; padding: 15px; border-radius: 8px; font-size: 0.9rem; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); white-space: pre-wrap; }
        .preview-reason { font-size: 0.8rem; color: var(--primary); margin-top: 5px; font-weight: bold; }
        
        .url-box { background: #eee; padding: 15px; border-radius: 8px; word-break: break-all; font-family: monospace; margin: 15px 0; }
    </style>
</head>
<body>

<div class="container">
    
    <div id="progress" class="progress-bar" style="display:none;">
        <div class="dot active"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
    </div>

    <section id="step-1" class="step-screen active home-hero">
        <div class="home-logo"><i class="fa-solid fa-gift"></i> ERABERU</div>
        <p>ã€Œå¤–ã•ãªã„ã€ã¨ã€Œæ°—æŒã¡ãŒä¼ã‚ã‚‹ã€<br>æ–°ã—ã„ã‚®ãƒ•ãƒˆä½“é¨“</p>
        <div style="font-size: 5rem; margin: 40px 0;">ğŸ</div>
        
        <button type="button" class="btn btn-primary" onclick="goToStep(2)">ã‚®ãƒ•ãƒˆã‚’ä½œæˆã™ã‚‹</button>
    </section>

    <section id="step-2" class="step-screen">
        <h2>å€™è£œã‚’3ã¤é¸ã‚“ã§ãã ã•ã„</h2>
        <p style="font-size:0.8rem; color:var(--text-sub); text-align:center;">Amazonãªã©ã®URLã‚’å…¥åŠ›</p>

        <form id="inputForm" onsubmit="return false;">
            <div class="input-group">
                <h3><i class="fa-solid fa-1"></i> å€™è£œ 1</h3>
                <input type="text" id="title1" placeholder="å•†å“å">
                <input type="url" id="url1" placeholder="URL (https://...)">
            </div>
            <div class="input-group">
                <h3><i class="fa-solid fa-2"></i> å€™è£œ 2</h3>
                <input type="text" id="title2" placeholder="å•†å“å">
                <input type="url" id="url2" placeholder="URL">
            </div>
            <div class="input-group">
                <h3><i class="fa-solid fa-3"></i> å€™è£œ 3</h3>
                <input type="text" id="title3" placeholder="å•†å“å">
                <input type="url" id="url3" placeholder="URL">
            </div>
        </form>
        
        <button type="button" class="btn btn-secondary" onclick="fillDemoData()" style="font-size:0.8rem; padding:8px;">[ãƒ‡ãƒ¢] è‡ªå‹•å…¥åŠ›</button>
        <button type="button" class="btn btn-primary" onclick="startLoading()">æ¬¡ã¸é€²ã‚€</button>
    </section>

    <section id="step-3" class="step-screen loading-container">
        <div class="spinner"></div>
        <h3>ã‚«ã‚¿ãƒ­ã‚°ã‚’ä½œæˆä¸­...</h3>
        <p>å•†å“æƒ…å ±ã‚’å–å¾—ã—ã¦ã„ã¾ã™</p>
    </section>

    <section id="step-4" class="step-screen">
        <h2>å•†å“æƒ…å ±ã®ç¢ºèª</h2>
        <div id="confirm-list"></div>
        <button type="button" class="btn btn-primary" onclick="goToStep(5)">ã“ã‚Œã§OK</button>
    </section>

    <section id="step-5" class="step-screen">
        <h2>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ·»ãˆã‚‹</h2>
        <label>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚«ãƒ¼ãƒ‰</label>
        <textarea id="main-message" rows="4" placeholder="ãŠã‚ã§ã¨ã†ï¼é¸ã‚“ã§ã­"></textarea>
        <label style="margin-top:20px;">æ€ã„å‡ºã®å†™çœŸ</label>
        <div style="background:#f9f9f9; padding:20px; text-align:center; border-radius:12px; border:2px dashed #ccc; color:#aaa;">
            <i class="fa-solid fa-camera"></i> å†™çœŸã‚’é¸æŠ
        </div>
        <button type="button" class="btn btn-primary" onclick="goToStep(6)">æ¬¡ã¸</button>
    </section>

    <section id="step-6" class="step-screen">
        <h2>ãªãœã“ã‚Œã‚’é¸ã‚“ã ã®ï¼Ÿ</h2>
        <div class="input-group">
            <h3 id="reason-title-1">å€™è£œ1</h3>
            <textarea id="reason1" rows="2" placeholder="ä¸€è¨€ã‚³ãƒ¡ãƒ³ãƒˆ..."></textarea>
        </div>
        <div class="input-group">
            <h3 id="reason-title-2">å€™è£œ2</h3>
            <textarea id="reason2" rows="2" placeholder="ä¸€è¨€ã‚³ãƒ¡ãƒ³ãƒˆ..."></textarea>
        </div>
        <div class="input-group">
            <h3 id="reason-title-3">å€™è£œ3</h3>
            <textarea id="reason3" rows="2" placeholder="ä¸€è¨€ã‚³ãƒ¡ãƒ³ãƒˆ..."></textarea>
        </div>
        <button type="button" class="btn btn-primary" onclick="goToStep(7)">æ¬¡ã¸</button>
    </section>

    <section id="step-7" class="step-screen">
        <h2>ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’é¸ã¶</h2>
        <div class="theme-grid">
            <div class="theme-option selected" onclick="selectTheme('pink', this)">
                <div class="theme-color" style="background:#ffecf2;"></div>
                <strong>ã‚¹ã‚¤ãƒ¼ãƒˆ</strong>
            </div>
            <div class="theme-option" onclick="selectTheme('blue', this)">
                <div class="theme-color" style="background:#e0f7fa;"></div>
                <strong>ã‚¯ãƒ¼ãƒ«</strong>
            </div>
            <div class="theme-option" onclick="selectTheme('orange', this)">
                <div class="theme-color" style="background:#fff3e0;"></div>
                <strong>ãƒãƒƒãƒ—</strong>
            </div>
            <div class="theme-option" onclick="selectTheme('purple', this)">
                <div class="theme-color" style="background:#f3e5ff;"></div>
                <strong>ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆ</strong>
            </div>
        </div>
        <button type="button" class="btn btn-primary" onclick="showPreview()">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</button>
    </section>

    <section id="step-8" class="step-screen">
        <h2>å®Œæˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h2>
        <div class="preview-mockup">
            <div class="preview-header" id="preview-header">
                <h3 style="margin:0;">For You</h3>
            </div>
            <div class="preview-msg" id="preview-msg-content"></div>
            <div style="font-size:0.9rem; font-weight:bold; margin-bottom:10px;">ã‚ãªãŸã¸ã®å€™è£œ3é¸</div>
            <div id="preview-items"></div>
        </div>
        <button type="button" class="btn btn-primary" onclick="goToStep(9)">URLã‚’ç™ºè¡Œ</button>
        <button type="button" class="btn btn-secondary" onclick="goToStep(7)">ä¿®æ­£ã™ã‚‹</button>
    </section>

    <section id="step-9" class="step-screen" style="text-align:center; padding-top:40px;">
        <div style="font-size:4rem; color:var(--primary); margin-bottom:20px;">
            <i class="fa-regular fa-circle-check"></i>
        </div>
        <h2>ã‚®ãƒ•ãƒˆURLç™ºè¡Œå®Œäº†ï¼</h2>
        <div class="url-box">https://eraberu-gift.demo/x8s7a9</div>
        <button type="button" class="btn btn-primary">URLã‚’ã‚³ãƒ”ãƒ¼</button>
        <button type="button" class="btn btn-secondary" style="background:#06c755; color:white; margin-top:10px;">LINEã§é€ã‚‹</button>
        <a href="javascript:location.reload()" style="display:block; margin-top:30px; color:var(--primary);">ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</a>
    </section>

</div>

<script>
    /* --- ãƒ—ãƒ­ã‚°ãƒ©ãƒ éƒ¨åˆ† --- */
    
    // ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜å ´æ‰€
    let currentData = {
        items: [],
        message: "",
        reasons: [],
        theme: "pink"
    };

    // ç”»é¢é·ç§»ã®å‡¦ç†
    function goToStep(stepNum) {
        // å…¨ç”»é¢ã‚’éš ã™
        const screens = document.querySelectorAll('.step-screen');
        screens.forEach(el => el.classList.remove('active'));

        // æŒ‡å®šã®ç”»é¢ã‚’è¡¨ç¤º
        const target = document.getElementById('step-' + stepNum);
        if(target) {
            target.classList.add('active');
        } else {
            alert("ã‚¨ãƒ©ãƒ¼: ç”»é¢ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ (step-" + stepNum + ")");
            return;
        }
        
        // ãƒšãƒ¼ã‚¸ãƒˆãƒƒãƒ—ã¸æˆ»ã™
        window.scrollTo(0,0);

        // é€²æ—ãƒãƒ¼ã®æ›´æ–°
        const progress = document.getElementById('progress');
        if(stepNum > 1 && stepNum < 9) {
            progress.style.display = 'flex';
            const dots = document.querySelectorAll('.dot');
            dots.forEach((dot, idx) => {
                if(idx < stepNum - 2) dot.classList.add('active');
                else dot.classList.remove('active');
            });
        } else {
            progress.style.display = 'none';
        }
    }

    // ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿è‡ªå‹•å…¥åŠ›
    function fillDemoData() {
        document.getElementById('title1').value = "ãƒãƒ«ãƒŸãƒ¥ãƒ¼ãƒ€ é›»æ°—ã‚±ãƒˆãƒ«";
        document.getElementById('url1').value = "https://amazon.co.jp/demo1";
        document.getElementById('title2').value = "SABON ãƒœãƒ‡ã‚£ã‚¹ã‚¯ãƒ©ãƒ–";
        document.getElementById('url2').value = "https://amazon.co.jp/demo2";
        document.getElementById('title3').value = "é«˜ç´šæ¾é˜ªç‰›ã‚®ãƒ•ãƒˆ";
        document.getElementById('url3').value = "https://amazon.co.jp/demo3";
    }

    // ãƒ­ãƒ¼ãƒ‰ä¸­ã®æ¼”å‡ºã¨ãƒ‡ãƒ¼ã‚¿ä¿å­˜
    function startLoading() {
        // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆç°¡æ˜“ï¼‰
        const t1 = document.getElementById('title1').value;
        if(!t1) {
            alert("ã›ã‚ã¦1ã¤ç›®ã®å•†å“ã¯å…¥åŠ›ã—ã¦ãã ã•ã„ï¼\nï¼ˆ[ãƒ‡ãƒ¢]ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨æ¥½ã§ã™ï¼‰");
            return;
        }

        goToStep(3); // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã¸

        // 1.5ç§’å¾Œã«æ¬¡ã®ç”»é¢ã¸ï¼ˆé€šä¿¡ã®ãƒ•ãƒªï¼‰
        setTimeout(() => {
            // å…¥åŠ›å€¤ã‚’å–å¾—
            currentData.items = [
                { title: document.getElementById('title1').value, url: document.getElementById('url1').value },
                { title: document.getElementById('title2').value, url: document.getElementById('url2').value },
                { title: document.getElementById('title3').value, url: document.getElementById('url3').value }
            ].filter(item => item.title !== ""); // ç©ºæ¬„ã¯é™¤å¤–

            renderConfirmList();
            renderReasonLabels();
            goToStep(4);
        }, 1500);
    }

    // ç¢ºèªãƒªã‚¹ãƒˆã®ç”Ÿæˆ
    function renderConfirmList() {
        const list = document.getElementById('confirm-list');
        list.innerHTML = "";
        currentData.items.forEach((item) => {
            list.innerHTML += `
                <div class="item-card">
                    <div class="item-thumb"><i class="fa-solid fa-gift"></i></div>
                    <div class="item-info">
                        <div class="item-title">${item.title}</div>
                        <a href="#" class="item-link">${item.url || 'URLãªã—'}</a>
                    </div>
                    <i class="fa-solid fa-pen" style="color:#ccc;"></i>
                </div>
            `;
        });
    }

    // ç†ç”±å…¥åŠ›ç”»é¢ã®ãƒ©ãƒ™ãƒ«æ›´æ–°
    function renderReasonLabels() {
        if(currentData.items[0]) document.getElementById('reason-title-1').innerText = currentData.items[0].title;
        if(currentData.items[1]) document.getElementById('reason-title-2').innerText = currentData.items[1].title;
        if(currentData.items[2]) document.getElementById('reason-title-3').innerText = currentData.items[2].title;
    }

    // ãƒ†ãƒ¼ãƒé¸æŠå‡¦ç†
    function selectTheme(themeName, el) {
        currentData.theme = themeName;
        document.querySelectorAll('.theme-option').forEach(d => d.classList.remove('selected'));
        el.classList.add('selected');
    }

    // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”Ÿæˆ
    function showPreview() {
        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ç†ç”±ã‚’ä¿å­˜
        currentData.message = document.getElementById('main-message').value;
        currentData.reasons = [
            document.getElementById('reason1').value,
            document.getElementById('reason2').value,
            document.getElementById('reason3').value
        ];

        // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®è¦‹ãŸç›®ã‚’æ›´æ–°
        const header = document.getElementById('preview-header');
        const msg = document.getElementById('preview-msg-content');
        const itemsBox = document.getElementById('preview-items');

        // ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼åæ˜ 
        let bg = "#ffecf2";
        if(currentData.theme === 'blue') bg = "#e0f7fa";
        if(currentData.theme === 'orange') bg = "#fff3e0";
        if(currentData.theme === 'purple') bg = "#f3e5ff";
        header.style.background = bg;
        
        msg.innerText = currentData.message || "ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãªã—ï¼‰";

        itemsBox.innerHTML = "";
        currentData.items.forEach((item, i) => {
            const reason = currentData.reasons[i] ? `<div class="preview-reason">ğŸ’¬ "${currentData.reasons[i]}"</div>` : "";
            itemsBox.innerHTML += `
                <div class="item-card" style="background:#fcfcfc; border:none; border-bottom:1px solid #eee;">
                    <div class="item-thumb" style="background:#eee;"><i class="fa-solid fa-gift"></i></div>
                    <div class="item-info">
                        <div class="item-title" style="font-size:0.9rem;">${item.title}</div>
                        ${reason}
                    </div>
                </div>
            `;
        });

        goToStep(8);
    }
</script>
</body>
</html>